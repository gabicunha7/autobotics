<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autobotics | Dashboard</title>
    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="css/dash_manutencao.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <aside>
        <section class="menu-container">
            <img class="img-logo-curta" src="assets/logo/LOGO_CURTA.png" alt="">
            <h1>MENU</h1>

            <div class="paginas-container">
                <a class="a-pagina" onclick="cargoDash()">
                    <img class="icon-pagina" src="assets/icones/dash_icon.png" alt="">
                    Dashboard
                </a>
                <a class="a-pagina" href="alerta.html">
                    <img class="icon-pagina" src="assets/icones/alerta_icon.png" alt="">
                    Alertas
                </a>
                <a class="a-pagina" href="parametros.html">
                    <img class="icon-pagina" src="assets/icones/parametros_icon.png" alt="">
                    Parâmetros
                </a>
                
                <a class="a-pagina" href="setor.html">
                    <img class="icon-pagina" src="assets/icones/setor_icon.png" alt="">
                    Setores
                </a>
                <a class="a-pagina" href="controladores.html">
                    <img class="icon-pagina" src="assets/icones/controlador_icon.png" alt="">
                    Controladores
                </a>
                <a class="a-pagina" href="funcionario.html">
                    <img class="icon-pagina" src="assets/icones/userImg.png" alt="">
                    Funcionários
                </a>
            </div>
        </section>
        <a href="index.html">
            <button id="btn-sair" onclick="limparSessao()">
                <img class="icon-sair" src="assets/icones/sair_icon.png" alt="">
                Sair
            </button>
        </a>
    </aside>

    <section class="container-content">
        <div class="div-superior">
            <div class="div-filtro">
                <p>Controlador: </p>
                <select name="Controlador" id="">
                    <option value="Controlador A">Controlador A</option>
                </select>
            </div>

            <div class="div-usuario">
                <div class="div-img-usuario">
                    <img src="assets/icones/foto_usuario.png" alt="">
                </div>
                <div>
                    <h6 id="nome-usuario"></h6>
                    <p id="email-usuario"></p>
                </div>
            </div>
        </div>


        <div class="div-conteudo">
            <div class="container-conteudo">
                <div class="div-info-conteudo">
                    <h3>Dashboard - Controlador A</h3>
                    <p id="data_atual"></p>
                </div>

                <div class="div-metricas">

                    <div class="div_grafico_cpu_ram">
                        <div class="div_grafico">
                            <p>Média de Status da CPU por dia da semana</p>
                            <canvas id="grafico_cpu"></canvas>
                        </div>

                        <div class="div_grafico">
                            <p>Média de Status da RAM por dia da semana</p>
                            <canvas id="grafico_ram"></canvas>
                        </div>
                    </div>

                    <div class="div_grafico_alertas_kpi">
                        <div class="kpis">
                            <div class="kpi_dashboard" id="total-alertas">
                                <h3>Total de alertas: </h3>
                                <p class="total-alertas">20</p>
                            </div>
                            <div class="kpi_dashboard" id="componente-alertas">
                                <h3>Componente com mais alertas: </h3>
                                <p class="componente-alertas">CPU</p>
                            </div>
                        </div>


                        <div class="div_grafico">
                            <p>Total de Alertas nos dias da semana</p>
                            <canvas id="grafico_alerta"></canvas>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>

</body>

<script src="js/rotaDash.js"></script>

<script>

    const dataAtual = new Date();
    const dia = dataAtual.getDate();
    const mes = dataAtual.getMonth() + 1; 
    const ano = dataAtual.getFullYear();

    document.getElementById("data_atual").innerHTML = `Data: ${dia}/${mes}/${ano}`;


    document.getElementById("nome-usuario").innerHTML = sessionStorage.NOME_USUARIO;
    document.getElementById("email-usuario").innerHTML = sessionStorage.EMAIL_USUARIO;


    const ctx_cpu = document.getElementById('grafico_cpu');

    new Chart(ctx_cpu, {
        type: 'line',
        data: {
            labels: ['25/09/25', '26/09/25', '27/09/25', '28/09/25', '29/09/25', '30/09/25', '01/10/25'],
            datasets: [{
                label: 'Nível Estável (até 60%)',
                data: [33, 27, 42, 39, 35, 28, 37], // linha fixa
                borderWidth: 1,
                borderColor: '#8CD610'
            },
            {
                label: 'Nível Médio (60% a 85%)',
                data: [64, 61, 82, 68, 72, 76, 77], // linha fixa
                borderWidth: 1,
                borderColor: '#e6ac00'
            },
            {
                label: 'Nível Crítico (>85%)',
                data: [89, 88, 93, 86, 90, 87, 90], // linha fixa
                borderWidth: 1,
                borderColor: '#E71831'
            }]
        },
        options: {
            scales: {
                x: {
                    title: {
                        display: true,
                        text: 'Dia',
                        font: {
                            size: 18
                        }
                    },
                    ticks: {
                        font: {
                            size: 16
                        }
                    }
                },
                y: {
                    title: {
                        display: true,
                        text: 'Uso em porcentagem',
                        font: {
                            size: 18
                        }
                    },
                    ticks: {
                        font: {
                            size: 16
                        }
                    }
                }
            }
        }
    });

    const ctx_ram = document.getElementById('grafico_ram');

    new Chart(ctx_ram, {
        type: 'line',
        data: {
            labels: ['25/09/25', '26/09/25', '27/09/25', '28/09/25', '29/09/25', '30/09/25', '01/10/25'],
            datasets: [{
                label: 'Nível Estável (até 75%)',
                data: [54, 67, 64, 59, 61, 69, 65], // linha fixa
                borderWidth: 1,
                borderColor: '#8CD610'
            },
            {
                label: 'Nível Médio (75% a 90%)',
                data: [75, 75, 76, 77, 82, 79, 81], // linha fixa
                borderWidth: 1,
                borderColor: '#e6ac00'
            },
            {
                label: 'Nível Crítico (>90%)',
                data: [90, 91, 91, 90, 93, 90, 92], // linha fixa
                borderWidth: 1,
                borderColor: '#E71831'
            }]
        },
        options: {
            scales: {
                x: {
                    title: {
                        display: true,
                        text: 'Dia',
                        font: {
                            size: 18
                        }
                    },
                    ticks: {
                        font: {
                            size: 16
                        }
                    }
                },
                y: {
                    title: {
                        display: true,
                        text: 'Uso em porcentagem',
                        font: {
                            size: 18
                        }
                    },
                    ticks: {
                        font: {
                            size: 16
                        }
                    }
                }
            }
        }
    });

    const ctx_alerta = document.getElementById('grafico_alerta');

    new Chart(ctx_alerta, {
        type: 'bar',
        data: {
            labels: ['25/09/25', '26/09/25', '27/09/25', '28/09/25', '29/09/25', '30/09/25', '01/10/25'],
            datasets: [{
                label: 'Alertas',
                data: [25, 34, 15, 20, 23, 28, 31],
                borderWidth: 2
            }]
        },
        options: {
            scales: {
                x: {
                    title: {
                        display: true,
                        text: 'Dia',
                        font: {
                            size: 18
                        }
                    },
                    ticks: {
                        font: {
                            size: 16
                        }
                    }
                },
                y: {
                    title: {
                        display: true,
                        text: 'Quantidade de Alertas',
                        font: {
                            size: 18
                        }
                    },
                    ticks: {
                        font: {
                            size: 16
                        }
                    }
                }
            }
        }
    });
</script>


</html>